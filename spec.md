# ローカル完結・安心PDFツールセット (Privacy-First PDF Tools) 仕様書

## 1. 概要
WebAssembly (WASM) を活用し、サーバーへのファイルアップロードを行わずにブラウザ上ですべての処理を完結させるPDF編集ツール群。
「ファイルをアップロードしたくない」というセキュリティ意識の高いユーザー層をターゲットとし、安心・安全・高速なPDF編集体験を提供する。

## 2. 外部仕様 (External Specifications)

### 2.1. コンセプト
*   **Privacy First**: サーバーサイド処理ゼロ。ファイルはユーザーのデバイスから出ないことを明示し、信頼を獲得する。
*   **Local Performance**: ネットワーク遅延のない高速な処理。
*   **Simple & Professional**: ビジネス用途に耐えうる、クリーンで直感的なUI。

### 2.2. ターゲットユーザー
*   機密文書を扱うビジネスパーソン
*   セキュリティ意識の高い個人・企業
*   頻繁にPDF編集を行うが、高額なソフトは導入したくない層

### 2.3. 提供機能
1.  **PDF結合 (Merge)**
    *   複数のPDFファイルをドラッグ＆ドロップでアップロード（読み込み）。
    *   ドラッグ操作でページの並び替え。
    *   1つのPDFとして保存。
2.  **PDF分割 (Split)**
    *   指定したページ範囲での分割。
    *   全ページを個別のPDFに分割。
3.  **PDF圧縮 (Compress)**
    *   画質/サイズ設定（高・中・低）を選択してファイルサイズを削減。
4.  **PDF変換 (Convert)**
    *   画像 (JPG/PNG) → PDF
    *   PDF → 画像 (JPG/PNG)

### 2.4. UI/UX デザイン方針
*   **メインカラー**: 信頼感のある色味（例: ディープブルー、フォレストグリーン）と、清潔感のある白・グレー。
*   **インタラクション**:
    *   大きなドラッグ＆ドロップエリア。
    *   処理中はプログレスバーやスピナーで状況を可視化。
    *   「処理はすべて端末内で行われます」というメッセージを常時目立つ場所に表示。
*   **レスポンシブ**: PCでの利用を主とするが、タブレット・スマホでも閲覧・簡易操作可能にする。

## 3. 内部仕様 (Internal Specifications)

### 3.1. 技術スタック
*   **プラットフォーム**: Webブラウザ (モダンブラウザ: Chrome, Edge, Firefox, Safari)
*   **ホスティング**: GitHub Pages
*   **フロントエンド**:
    *   HTML5 / CSS3 (Vanilla CSS, Modern Features)
    *   JavaScript (ES6+)
*   **コア技術 (PDF処理)**:
    *   **WebAssembly (WASM)**: 高速なPDF処理を実現するために採用。
    *   **ライブラリ候補**:
        *   *PDFの操作 (結合・分割)*: `pdf-lib` (JS) または `pdfcpu` (Go -> WASM)
        *   *PDFのレンダリング/変換*: `pdf.js` (Mozilla)
        *   *圧縮*: WASM化されたGhostscriptや、画像再圧縮ロジックを含むカスタムWASMモジュールを検討。
        *   *※初期フェーズでは `pdf-lib` と `pdf.js` を中心に構成し、必要に応じて `pdfcpu` 等のWASMモジュールを組み込む構成とする。*

### 3.2. アーキテクチャ
*   **Client-Side Only (SPA)**:
    *   サーバーサイドのAPIは一切持たない。
    *   静的ファイル (HTML/CSS/JS/WASM) のみで構成。
*   **Service Worker (PWA)**:
    *   オフライン動作をサポートし、「ネットがなくても使える＝外部送信していない」という安心感を強化する（オプション）。

### 3.3. データフロー
1.  ユーザーがファイルをブラウザにドロップ（File APIで読み取り）。
2.  JavaScript/WASMがメモリ上（またはIndexedDB）でバイナリデータを展開。
3.  処理実行（結合・分割・圧縮・変換）。
4.  生成されたBlobデータをダウンロードリンクとして提供。
5.  ページリロードや閉じる操作でメモリ解放（データは永続化しない）。

### 3.4. セキュリティ・プライバシー
*   **CSP (Content Security Policy)**: 外部への意図しない通信をブロックする厳格なポリシーを設定。
*   **Analytics**: プライバシーに配慮した解析ツール（またはGoogle AnalyticsのIP匿名化設定）を使用。

## 4. 開発・運用フロー
1.  **リポジトリ**: GitHub
2.  **CI/CD**: GitHub Actions (ビルド、テスト、GitHub Pagesへのデプロイ)
3.  **マネタイズ**:
    *   Google AdSense (ビジネス系カテゴリ)
    *   寄付ボタン (Buy Me a Coffee等)
